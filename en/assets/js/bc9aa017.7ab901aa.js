"use strict";(self.webpackChunkalgorithm_essentials=self.webpackChunkalgorithm_essentials||[]).push([[3207],{21774:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>u,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"string/strstr","title":"Implement strStr()","description":"\u63cf\u8ff0","source":"@site/docs/string/strstr.md","sourceDirName":"string","slug":"/string/strstr","permalink":"/en/string/strstr","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Implement strStr()"},"sidebar":"docs","previous":{"title":"Course Schedule II","permalink":"/en/graph/topological-sort/course-schedule-ii"},"next":{"title":"String to Integer (atoi)","permalink":"/en/string/atoi"}}');var a=t(74848),i=t(28453),l=t(11470),s=t(19365);const u={title:"Implement strStr()"},c=void 0,o={},p=[{value:"\u63cf\u8ff0",id:"\u63cf\u8ff0",level:3},{value:"\u5206\u6790",id:"\u5206\u6790",level:3},{value:"\u66b4\u529b\u5339\u914d",id:"\u66b4\u529b\u5339\u914d",level:3},{value:"KMP",id:"kmp",level:3},{value:"\u76f8\u5173\u9898\u76ee",id:"\u76f8\u5173\u9898\u76ee",level:3}];function d(n){const e={a:"a",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h3,{id:"\u63cf\u8ff0",children:"\u63cf\u8ff0"}),"\n",(0,a.jsx)(e.p,{children:"Implement strStr()."}),"\n",(0,a.jsx)(e.p,{children:"Returns a pointer to the first occurrence of needle in haystack, or null if needle is not part of haystack."}),"\n",(0,a.jsx)(e.h3,{id:"\u5206\u6790",children:"\u5206\u6790"}),"\n",(0,a.jsxs)(e.p,{children:["\u66b4\u529b\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u662f ",(0,a.jsx)(e.code,{children:"O(m*n)"}),"\uff0c\u4ee3\u7801\u5982\u4e0b\u3002\u66f4\u9ad8\u6548\u7684\u7684\u7b97\u6cd5\u6709 KMP \u7b97\u6cd5\u3001Boyer-Mooer \u7b97\u6cd5\u548c Rabin-Karp \u7b97\u6cd5\u3002\u9762\u8bd5\u4e2d\u66b4\u529b\u7b97\u6cd5\u8db3\u591f\u4e86\uff0c\u4e00\u5b9a\u8981\u5199\u5f97\u6ca1\u6709 BUG\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"\u66b4\u529b\u5339\u914d",children:"\u66b4\u529b\u5339\u914d"}),"\n","\n",(0,a.jsxs)(l.A,{defaultValue:"java",values:[{label:"Java",value:"java"},{label:"C++",value:"cpp"}],children:[(0,a.jsx)(s.A,{value:"java",children:(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// Implement strStr()\n// \u66b4\u529b\u89e3\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(N*M)\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6O(1)\nclass Solution {\n    public int strStr(final String haystack, final String needle) {\n        if (needle.isEmpty()) return 0;\n\n        final int N = haystack.length() - needle.length() + 1;\n        for (int i = 0; i < N; i++) {\n            int j = i;\n            int k = 0;\n            while (j < haystack.length() && k < needle.length() &&\n                    haystack.charAt(j) == needle.charAt(k)) {\n                j++;\n                k++;\n            }\n            if (k == needle.length()) return i;\n        }\n        return -1;\n    }\n}\n"})})}),(0,a.jsx)(s.A,{value:"cpp",children:(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:"// Implement strStr()\n// \u66b4\u529b\u89e3\u6cd5\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(N*M)\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6O(1)\nclass Solution {\npublic:\n    int strStr(const string& haystack, const string& needle) {\n        if (needle.empty()) return 0;\n\n        const int N = haystack.size() - needle.size() + 1;\n        for (int i = 0; i < N; i++) {\n            int j = i;\n            int k = 0;\n            while (j < haystack.size() && k < needle.size() && haystack[j] == needle[k]) {\n                j++;\n                k++;\n            }\n            if (k == needle.size()) return i;\n        }\n        return -1;\n    }\n};\n"})})})]}),"\n",(0,a.jsx)(e.h3,{id:"kmp",children:"KMP"}),"\n",(0,a.jsxs)(l.A,{defaultValue:"java",values:[{label:"Java",value:"java"},{label:"C++",value:"cpp"}],children:[(0,a.jsx)(s.A,{value:"java",children:(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'// Implement strStr()\n// KMP\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(N+M)\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6O(M)\npublic class Solution {\n    public int strStr(final String haystack, final String needle) {\n        return kmp(haystack, needle);\n    }\n\n    /*\n     * \u8ba1\u7b97\u90e8\u5206\u5339\u914d\u8868\uff0c\u5373next\u6570\u7ec4.\n     *\n     * @param[in] pattern \u6a21\u5f0f\u4e32\n     * @param[out] next next\u6570\u7ec4\n     * @return \u65e0\n     */\n    private static void compute_prefix(final String pattern, final int[] next) {\n        int i;\n        int j = -1;\n\n        next[0] = j;\n        for (i = 1; i < pattern.length(); i++) {\n            while (j > -1 && pattern.charAt(j + 1) != pattern.charAt(i)) j = next[j];\n\n            if (pattern.charAt(i) == pattern.charAt(j + 1)) j++;\n            next[i] = j;\n        }\n    }\n\n    /*\n     * @brief KMP\u7b97\u6cd5.\n     *\n     * @param[in] text \u6587\u672c\n     * @param[in] pattern \u6a21\u5f0f\u4e32\n     * @return \u6210\u529f\u5219\u8fd4\u56de\u7b2c\u4e00\u6b21\u5339\u914d\u7684\u4f4d\u7f6e\uff0c\u5931\u8d25\u5219\u8fd4\u56de-1\n     */\n    private static int kmp(final String text, final String pattern) {\n        int i;\n        int j = -1;\n        final int n = text.length();\n        final int m = pattern.length();\n        if (n == 0 && m == 0) return 0; /* "","" */\n        if (m == 0) return 0;  /* "a","" */\n        int[] next = new int[m];\n\n        compute_prefix(pattern, next);\n\n        for (i = 0; i < n; i++) {\n            while (j > -1 && pattern.charAt(j + 1) != text.charAt(i)) j = next[j];\n\n            if (text.charAt(i) == pattern.charAt(j + 1)) j++;\n            if (j == m - 1) {\n                return i-j;\n            }\n        }\n\n        return -1;\n    }\n}\n'})})}),(0,a.jsx)(s.A,{value:"cpp",children:(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-cpp",children:'// Implement strStr()\n// KMP\uff0c\u65f6\u95f4\u590d\u6742\u5ea6O(N+M)\uff0c\u7a7a\u95f4\u590d\u6742\u5ea6O(M)\nclass Solution {\npublic:\n    int strStr(const string& haystack, const string& needle) {\n        return kmp(haystack.c_str(), needle.c_str());\n    }\nprivate:\n    /*\n     * @brief \u8ba1\u7b97\u90e8\u5206\u5339\u914d\u8868\uff0c\u5373next\u6570\u7ec4.\n     *\n     * @param[in] pattern \u6a21\u5f0f\u4e32\n     * @param[out] next next\u6570\u7ec4\n     * @return \u65e0\n     */\n    static void compute_prefix(const char *pattern, int next[]) {\n        int i;\n        int j = -1;\n        const int m = strlen(pattern);\n\n        next[0] = j;\n        for (i = 1; i < m; i++) {\n            while (j > -1 && pattern[j + 1] != pattern[i]) j = next[j];\n\n            if (pattern[i] == pattern[j + 1]) j++;\n            next[i] = j;\n        }\n    }\n\n    /*\n     * @brief KMP\u7b97\u6cd5.\n     *\n     * @param[in] text \u6587\u672c\n     * @param[in] pattern \u6a21\u5f0f\u4e32\n     * @return \u6210\u529f\u5219\u8fd4\u56de\u7b2c\u4e00\u6b21\u5339\u914d\u7684\u4f4d\u7f6e\uff0c\u5931\u8d25\u5219\u8fd4\u56de-1\n     */\n    static int kmp(const char *text, const char *pattern) {\n        int i;\n        int j = -1;\n        const int n = strlen(text);\n        const int m = strlen(pattern);\n        if (n == 0 && m == 0) return 0; /* "","" */\n        if (m == 0) return 0;  /* "a","" */\n        int *next = (int*)malloc(sizeof(int) * m);\n\n        compute_prefix(pattern, next);\n\n        for (i = 0; i < n; i++) {\n            while (j > -1 && pattern[j + 1] != text[i]) j = next[j];\n\n            if (text[i] == pattern[j + 1]) j++;\n            if (j == m - 1) {\n                free(next);\n                return i-j;\n            }\n        }\n\n        free(next);\n        return -1;\n    }\n};\n'})})})]}),"\n",(0,a.jsx)(e.h3,{id:"\u76f8\u5173\u9898\u76ee",children:"\u76f8\u5173\u9898\u76ee"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:(0,a.jsx)(e.a,{href:"/en/string/atoi",children:"String to Integer (atoi)"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},19365:(n,e,t)=>{t.d(e,{A:()=>l});t(96540);var r=t(34164);const a={tabItem:"tabItem_Ymn6"};var i=t(74848);function l(n){let{children:e,hidden:t,className:l}=n;return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,l),hidden:t,children:e})}},11470:(n,e,t)=>{t.d(e,{A:()=>y});var r=t(96540),a=t(34164),i=t(23104),l=t(56347),s=t(205),u=t(57485),c=t(31682),o=t(70679);function p(n){return r.Children.toArray(n).filter((n=>"\n"!==n)).map((n=>{if(!n||(0,r.isValidElement)(n)&&function(n){const{props:e}=n;return!!e&&"object"==typeof e&&"value"in e}(n))return n;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof n.type?n.type:n.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(n){const{values:e,children:t}=n;return(0,r.useMemo)((()=>{const n=e??function(n){return p(n).map((n=>{let{props:{value:e,label:t,attributes:r,default:a}}=n;return{value:e,label:t,attributes:r,default:a}}))}(t);return function(n){const e=(0,c.XI)(n,((n,e)=>n.value===e.value));if(e.length>0)throw new Error(`Docusaurus error: Duplicate values "${e.map((n=>n.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(n),n}),[e,t])}function h(n){let{value:e,tabValues:t}=n;return t.some((n=>n.value===e))}function f(n){let{queryString:e=!1,groupId:t}=n;const a=(0,l.W6)(),i=function(n){let{queryString:e=!1,groupId:t}=n;if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,u.aZ)(i),(0,r.useCallback)((n=>{if(!i)return;const e=new URLSearchParams(a.location.search);e.set(i,n),a.replace({...a.location,search:e.toString()})}),[i,a])]}function m(n){const{defaultValue:e,queryString:t=!1,groupId:a}=n,i=d(n),[l,u]=(0,r.useState)((()=>function(n){let{defaultValue:e,tabValues:t}=n;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((n=>n.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=t.find((n=>n.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:e,tabValues:i}))),[c,p]=f({queryString:t,groupId:a}),[m,j]=function(n){let{groupId:e}=n;const t=function(n){return n?`docusaurus.tab.${n}`:null}(e),[a,i]=(0,o.Dv)(t);return[a,(0,r.useCallback)((n=>{t&&i.set(n)}),[t,i])]}({groupId:a}),x=(()=>{const n=c??m;return h({value:n,tabValues:i})?n:null})();(0,s.A)((()=>{x&&u(x)}),[x]);return{selectedValue:l,selectValue:(0,r.useCallback)((n=>{if(!h({value:n,tabValues:i}))throw new Error(`Can't select invalid tab value=${n}`);u(n),p(n),j(n)}),[p,j,i]),tabValues:i}}var j=t(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=t(74848);function b(n){let{className:e,block:t,selectedValue:r,selectValue:l,tabValues:s}=n;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),o=n=>{const e=n.currentTarget,t=u.indexOf(e),a=s[t].value;a!==r&&(c(e),l(a))},p=n=>{let e=null;switch(n.key){case"Enter":o(n);break;case"ArrowRight":{const t=u.indexOf(n.currentTarget)+1;e=u[t]??u[0];break}case"ArrowLeft":{const t=u.indexOf(n.currentTarget)-1;e=u[t]??u[u.length-1];break}}e?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:s.map((n=>{let{value:e,label:t,attributes:i}=n;return(0,v.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:n=>u.push(n),onKeyDown:p,onClick:o,...i,className:(0,a.A)("tabs__item",x.tabItem,i?.className,{"tabs__item--active":r===e}),children:t??e},e)}))})}function g(n){let{lazy:e,children:t,selectedValue:i}=n;const l=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const n=l.find((n=>n.props.value===i));return n?(0,r.cloneElement)(n,{className:(0,a.A)("margin-top--md",n.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:l.map(((n,e)=>(0,r.cloneElement)(n,{key:e,hidden:n.props.value!==i})))})}function k(n){const e=m(n);return(0,v.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,v.jsx)(b,{...e,...n}),(0,v.jsx)(g,{...e,...n})]})}function y(n){const e=(0,j.A)();return(0,v.jsx)(k,{...n,children:p(n.children)},String(e))}},28453:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>s});var r=t(96540);const a={},i=r.createContext(a);function l(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:l(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);