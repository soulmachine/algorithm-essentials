"use strict";(self.webpackChunkalgorithm_essentials=self.webpackChunkalgorithm_essentials||[]).push([[6984],{90064:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"graph/ufs/README","title":"\u5e76\u67e5\u96c6","description":"\u5e76\u67e5\u96c6\u7684\u5b9a\u4e49","source":"@site/docs/graph/ufs/README.md","sourceDirName":"graph/ufs","slug":"/graph/ufs/","permalink":"/graph/ufs/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"\u5e76\u67e5\u96c6"},"sidebar":"docs","previous":{"title":"All Paths From Source to Target","permalink":"/graph/all-paths-from-source-to-target"},"next":{"title":"Number of Connected Components in an Undirected Graph","permalink":"/graph/ufs/number-of-connected-components-in-an-undirected-graph"}}');var r=s(74848),t=s(28453);const a={title:"\u5e76\u67e5\u96c6"},l=void 0,c={},h=[{value:"\u5e76\u67e5\u96c6\u7684\u5b9a\u4e49",id:"\u5e76\u67e5\u96c6\u7684\u5b9a\u4e49",level:2},{value:"\u5e76\u67e5\u96c6\u7684\u4f18\u5316",id:"\u5e76\u67e5\u96c6\u7684\u4f18\u5316",level:2},{value:"\u8def\u5f84\u538b\u7f29",id:"\u8def\u5f84\u538b\u7f29",level:3},{value:"Union by rank",id:"union-by-rank",level:3}];function x(n){const e={a:"a",annotation:"annotation",code:"code",h2:"h2",h3:"h3",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",msup:"msup",p:"p",pre:"pre",semantics:"semantics",span:"span",ul:"ul",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"\u5e76\u67e5\u96c6\u7684\u5b9a\u4e49",children:"\u5e76\u67e5\u96c6\u7684\u5b9a\u4e49"}),"\n",(0,r.jsx)(e.p,{children:"\u5e76\u67e5\u96c6(Disjoint Set)\u6700\u5e38\u7528\u7684\u4e24\u4e2a\u64cd\u4f5c\u662f\u67e5\u8be2(find)\u548c\u5408\u5e76(union \u6216 merge)\uff0c\uff0c\u6240\u4ee5\u4e5f\u79f0\u4e3a Union-find Set\u6216\u8005Merge-find Set\u3002\u5e76\u67e5\u96c6\u662f\u4e00\u79cd\u6811\u5f62\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f46\u662f\u5e38\u7528\u6765\u89e3\u51b3\u56fe\u91cc\u9762\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u672c\u4e66\u628a\u5e76\u67e5\u96c6\u653e\u5230\u56fe\u8fd9\u4e00\u7ae0\u3002"}),"\n",(0,r.jsx)(e.p,{children:"\u5e76\u67e5\u96c6\u901a\u5e38\u7528\u6811\u7684\u53cc\u4eb2\u8868\u793a\u6cd5\uff0c\u5373\u5f00\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u4f4d\u7f6e\u5b58\u50a8\u7684\u662f\u8be5\u8282\u70b9\u7684\u7236\u4eb2\uff0c"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["\u521d\u59cb\u5316\u65f6\uff0c\u6bcf\u4e2a\u5143\u7d20\u662f\u4e00\u9897\u5355\u72ec\u7684\u6811\uff0c\u5373 ",(0,r.jsx)(e.code,{children:"p[x]=x"}),"\uff0c\u7136\u540e\u6839\u636e\u8fb9(edge)\u7684\u4fe1\u606f\u521d\u59cb\u5316\u6240\u6709\u8282\u70b9\uff0c\u6bd4\u5982",(0,r.jsx)(e.code,{children:"x"}),"\u548c",(0,r.jsx)(e.code,{children:"y"}),"\u4e4b\u95f4\u6709\u4e00\u6761\u8fb9\uff0c\u90a3\u4e48\u5c31\u521d\u59cb\u5316\u4e3a ",(0,r.jsx)(e.code,{children:"p[x]=y"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u5982\u4f55\u5224\u65ad\u6811\u6839\uff0c ",(0,r.jsx)(e.code,{children:"p[x] == x"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u5982\u4f55\u67e5\u627e\u5143\u7d20",(0,r.jsx)(e.code,{children:"x"}),"\u7684\u6839\u8282\u70b9\uff0c ",(0,r.jsx)(e.code,{children:"while(p[x] != x) x = p[x]"})]}),"\n",(0,r.jsxs)(e.li,{children:["\u5982\u4f55\u5408\u5e76\u4e24\u4e2a\u96c6\u5408\uff0c\u6bd4\u5982\u5408\u5e76\u5143\u7d20",(0,r.jsx)(e.code,{children:"x"}),"\u548c",(0,r.jsx)(e.code,{children:"y"}),"\u6240\u5728\u7684\u96c6\u5408\uff0c\u5148\u627e\u5230",(0,r.jsx)(e.code,{children:"x"}),"\u7684\u6839\u8282\u70b9",(0,r.jsx)(e.code,{children:"px"}),"\u548c",(0,r.jsx)(e.code,{children:"y"}),"\u7684\u6839\u8282\u70b9",(0,r.jsx)(e.code,{children:"py"}),"\uff0c",(0,r.jsx)(e.code,{children:"p[px] = py"})]}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cpp",children:"class DSU {\npublic:\n    DSU(int n) {\n        p = vector<int>(n);\n        // initialize\n        for (int x = 0; x < n; x++) p[x] = x;\n    }\n\n    int find(int x) {\n        while (p[x] != x) x = p[x];\n        return x;\n    }\n\n    // return the number of reduced components\n    int merge(int x, int y) {\n        int px = find(x);\n        int py = find(y);\n        if (px == py) return 0;\n        p[px] = py;\n        reurn 1;\n    }\nprivate:\n    vector<int> p;\n};\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5e76\u67e5\u96c6\u7684\u4f18\u5316",children:"\u5e76\u67e5\u96c6\u7684\u4f18\u5316"}),"\n",(0,r.jsxs)(e.p,{children:["\u539f\u59cb\u7684\u5e76\u67e5\u96c6\uff0c\u67e5\u8be2\u548c\u5408\u5e76\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u53d6\u51b3\u4e8e\u6811\u7684\u9ad8\u5ea6",(0,r.jsx)(e.code,{children:"h"}),"\uff0c\u6240\u4ee5\u65f6\u95f4\u590d\u6742\u5ea6\u662f",(0,r.jsx)(e.code,{children:"O(h)"}),"\uff0c\u5373 ",(0,r.jsx)(e.code,{children:"O(log n)"}),"\u3002\u5982\u679c\u80fd\u964d\u4f4e\u6811\u7684\u9ad8\u5ea6\uff0c\u5c31\u80fd\u964d\u4f4e\u65f6\u95f4\u590d\u6742\u5ea6\u3002"]}),"\n",(0,r.jsx)(e.h3,{id:"\u8def\u5f84\u538b\u7f29",children:"\u8def\u5f84\u538b\u7f29"}),"\n",(0,r.jsxs)(e.p,{children:["\u53ef\u4ee5\u5728\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u987a\u4fbf\u538b\u7f29\u8def\u5f84\uff0c",(0,r.jsx)(e.code,{children:"p[x] = p[p[x]]"}),"\uff0c\u4e0d\u65ad\u5faa\u73af\uff0c\u6700\u7ec8\u628a\u88ab\u67e5\u8be2\u8282\u70b9\u76f4\u63a5\u8fde\u63a5\u5230\u6839\u8282\u70b9\uff0c\u6811\u7684\u9ad8\u5ea6\u53d8\u6210\u4e862\uff0c\u6210\u4e3a\u4e00\u4e2a\u5e38\u91cf\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cpp",children:"int find(int x) {\n    while (p[x] != x) {\n        // highlight-next-line\n        p[x] = p[p[x]]; // path compression\n        x = p[x];\n    }\n    return x;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"union-by-rank",children:"Union by rank"}),"\n",(0,r.jsx)(e.p,{children:"\u539f\u59cb\u7684\u5408\u5e76\u64cd\u4f5c\uff0c\u76f4\u63a5\u8d4b\u503c\uff0c\u5c31\u5b8c\u6210\u4e86\u5408\u5e76\u3002\u5e94\u8be5\u8ba9\u77ee\u7684\u6811\u5411\u9ad8\u7684\u6811\u5408\u5e76\uff0c\u8fd9\u6837\u9ad8\u5ea6\u8d77\u7801\u4e0d\u4f1a\u589e\u957f\uff0c\u5982\u679c\u8ba9\u9ad8\u7684\u6811\u5411\u77ee\u7684\u6811\u5408\u5e76\uff0c\u9ad8\u5ea6\u4e00\u5b9a\u4f1a\u7ee7\u7eed\u589e\u957f\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u4e3a\u4e86\u6839\u636e\u9ad8\u5ea6\u6765\u5408\u5e76\uff0c\u9700\u8981\u65b0\u589e\u4e00\u4e2a\u6570\u7ec4\u6765\u8bb0\u5f55\u6bcf\u9897\u6811\u7684\u9ad8\u5ea6\uff0c",(0,r.jsx)(e.code,{children:"vector<int> rank(n)"}),"\uff0c",(0,r.jsx)(e.code,{children:"rank[x]"}),"\u4ee3\u8868",(0,r.jsx)(e.code,{children:"x"}),"\u5143\u7d20\u6240\u5728\u7684\u6811\u7684\u9ad8\u5ea6\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-cpp",children:"class DSU {\npublic:\n    DSU(int n) {\n        p = vector<int>(n);\n        rank = vector<int>(n);\n        // initialize\n        for (int x = 0; x < n; x++) {\n            p[x] = x;\n            // highlight-next-line\n            rank[x] = 1;\n        }\n    }\n\n    int find(int x) {\n        while (p[x] != x) {\n            p[x] = p[p[x]]; // path compression\n            x = p[x];\n        }\n        return x;\n    }\n\n    int merge(int x, int y) {\n        int px = find(x);\n        int py = find(y);\n        if (px == py) return 0;\n\n        // highlight-start\n        if (rank[px] < rank[py]) {\n            p[px] = py;\n        } else if (rank[px] > rank[py]) {\n            p[py] = px;\n        } else {\n            p[px] = py;\n            rank[px] += 1;\n        }\n        // highlight-end\n        return 1;\n    }\nprivate:\n    vector<int> p;\n    // highlight-next-line\n    vector<int> rank;\n};\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u8def\u5f84\u538b\u7f29\u53ea\u9700\u8981\u4e00\u884c\u4ee3\u7801\uff0c\u800c\u57fa\u4e8erank\u7684\u4f18\u5316\uff0c\u6539\u52a8\u7684\u4ee3\u7801\u6bd4\u8f83\u591a\uff0c\u6240\u4ee5\uff0c\u5728\u9762\u8bd5\u4e2d\u4f7f\u7528\u8def\u5f84\u538b\u7f29\u8fd9\u4e2a\u4f18\u5316\u5c31\u591f\u4e86\u3002"}),"\n",(0,r.jsxs)(e.p,{children:["\u540c\u65f6\u4f7f\u7528\u8def\u5f84\u538b\u7f29\u548cunion by rank\u4f18\u5316\u540e\uff0c\u5e76\u67e5\u96c6\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e0d\u518d\u662f",(0,r.jsx)(e.code,{children:"O(h)"}),"\uff0c\u800c\u662f",(0,r.jsxs)(e.span,{className:"katex",children:[(0,r.jsx)(e.span,{className:"katex-mathml",children:(0,r.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(e.semantics,{children:[(0,r.jsxs)(e.mrow,{children:[(0,r.jsx)(e.mi,{children:"O"}),(0,r.jsx)(e.mo,{stretchy:"false",children:"("}),(0,r.jsxs)(e.msup,{children:[(0,r.jsxs)(e.mrow,{children:[(0,r.jsx)(e.mi,{children:"log"}),(0,r.jsx)(e.mo,{children:"\u2061"})]}),(0,r.jsx)(e.mo,{children:"\u2217"})]}),(0,r.jsx)(e.mi,{children:"n"}),(0,r.jsx)(e.mo,{stretchy:"false",children:")"})]}),(0,r.jsx)(e.annotation,{encoding:"application/x-tex",children:"O(\\log^* n)"})]})})}),(0,r.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(e.span,{className:"base",children:[(0,r.jsx)(e.span,{className:"strut",style:{height:"1.023em",verticalAlign:"-0.25em"}}),(0,r.jsx)(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),(0,r.jsx)(e.span,{className:"mopen",children:"("}),(0,r.jsxs)(e.span,{className:"mop",children:[(0,r.jsxs)(e.span,{className:"mop",children:["lo",(0,r.jsx)(e.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,r.jsx)(e.span,{className:"msupsub",children:(0,r.jsx)(e.span,{className:"vlist-t",children:(0,r.jsx)(e.span,{className:"vlist-r",children:(0,r.jsx)(e.span,{className:"vlist",style:{height:"0.773em"},children:(0,r.jsxs)(e.span,{style:{top:"-3.1473em",marginRight:"0.05em"},children:[(0,r.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsx)(e.span,{className:"mbin mtight",children:"\u2217"})})]})})})})})]}),(0,r.jsx)(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,r.jsx)(e.span,{className:"mord mathnormal",children:"n"}),(0,r.jsx)(e.span,{className:"mclose",children:")"})]})})]}),", ",(0,r.jsxs)(e.span,{className:"katex",children:[(0,r.jsx)(e.span,{className:"katex-mathml",children:(0,r.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,r.jsxs)(e.semantics,{children:[(0,r.jsx)(e.mrow,{children:(0,r.jsxs)(e.msup,{children:[(0,r.jsxs)(e.mrow,{children:[(0,r.jsx)(e.mi,{children:"log"}),(0,r.jsx)(e.mo,{children:"\u2061"})]}),(0,r.jsx)(e.mo,{children:"\u2217"})]})}),(0,r.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\log^*"})]})})}),(0,r.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,r.jsxs)(e.span,{className:"base",children:[(0,r.jsx)(e.span,{className:"strut",style:{height:"0.9675em",verticalAlign:"-0.1944em"}}),(0,r.jsxs)(e.span,{className:"mop",children:[(0,r.jsxs)(e.span,{className:"mop",children:["lo",(0,r.jsx)(e.span,{style:{marginRight:"0.01389em"},children:"g"})]}),(0,r.jsx)(e.span,{className:"msupsub",children:(0,r.jsx)(e.span,{className:"vlist-t",children:(0,r.jsx)(e.span,{className:"vlist-r",children:(0,r.jsx)(e.span,{className:"vlist",style:{height:"0.773em"},children:(0,r.jsxs)(e.span,{style:{top:"-3.1473em",marginRight:"0.05em"},children:[(0,r.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,r.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,r.jsx)(e.span,{className:"mbin mtight",children:"\u2217"})})]})})})})})]})]})})]})," \u4ee3\u8868",(0,r.jsx)(e.a,{href:"https://en.wikipedia.org/wiki/Iterated_logarithm",children:"iterated logarithm"}),"\uff0c\u6700\u5927\u503c\u4e0d\u8d85\u8fc75\u3002\u56e0\u6b64\u53ef\u4ee5\u8ba4\u4e3a\u5e76\u67e5\u96c6\u7684\u67e5\u8be2\u548c\u5408\u5e76\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(1)\u3002"]})]})}function d(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(x,{...n})}):x(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>a,x:()=>l});var i=s(96540);const r={},t=i.createContext(r);function a(n){const e=i.useContext(t);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(t.Provider,{value:e},n.children)}}}]);